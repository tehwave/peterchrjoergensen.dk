---
/**
 * Figure Component
 *
 * Semantic figure/figcaption wrapper for optimized images with captions.
 * Uses Astro's Picture component for automatic AVIF/WebP generation.
 * Use in MDX blog posts for proper semantic markup.
 *
 * @example
 * ```mdx
 * import Figure from '../../components/Figure.astro';
 * import myImage from '../../assets/blog/my-image.jpg';
 *
 * <Figure
 *   src={myImage}
 *   alt="Description of image"
 *   caption="Photo by Author on Unsplash"
 * />
 * ```
 */

import { Picture } from "astro:assets";
import type { ImageMetadata } from "astro";

interface Props {
	src: ImageMetadata;
	alt: string;
	caption?: string;
}

const { src, alt, caption } = Astro.props;
---

<figure>
	<Picture src={src} formats={["avif", "webp"]} alt={alt} inferSize />
	{caption && <figcaption>{caption}</figcaption>}
</figure>

<style lang="scss">
	@use "../styles/variables" as *;
	@use "../styles/mixins" as *;

	figure {
		margin: 0;
	}

	img {
		width: 100%;
		height: auto;
		display: block;
        margin-bottom: 0 !important;
	}

	figcaption {
		margin-top: $space-md;
		font-size: $font-size-sm;
		color: $color-text-muted;
		text-align: center;
		font-style: italic;
	}
</style>
